<h3 class="products-header bg-dark text-light">Products</h3>
<div class="products-container d-flex flex-column gap-3">
    <div *ngIf="productArray === undefined || productArray.length === 0">
        <p>No Products</p>
    </div>
    <div *ngIf="productArray">
        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
            <mat-nested-tree-node *matTreeNodeDef="let node">
                <li class="tree-container">
                    <div class="mat-tree-node d-flex flex-row justify-content-between">
                        <div class="d-flex flex-row align-items-center">
                            <button class="btn" mat-icon-button matTreeNodeToggle
                                [attr.aria-label]="'Toggle ' + node.name" *ngIf="node.bandsGroups.bands === null">
                                <mat-icon class="mat-icon-rtl-mirror" *ngIf="node.bandsGroups"
                                    style="cursor: not-allowed">
                                    {{'chevron_right'}}
                                </mat-icon>
                            </button>
                            <mat-checkbox color="success"></mat-checkbox>
                            <span class="product-name">{{node.name}}</span>
                        </div>

                        <div class="d-flex flex-row gap-2 mr-2" *ngIf="node.bandsGroups">
                            <button class="btn"><fa-icon [icon]="faDownload" title="Download Product"
                                    (click)="downloadProduct(node)"></fa-icon></button>
                            <button class="btn"><fa-icon [icon]="faShare" title="Share Product"></fa-icon></button>
                            <button class="btn"><fa-icon [icon]="faInfoCircle" title="Properties"
                                    (click)="openProductProperties($event)"></fa-icon></button>
                            <button class="btn"><fa-icon [icon]="faTrash" title="Delete Product"
                                    (click)="deleteProduct(node)"></fa-icon></button>
                        </div>
                    </div>
                </li>
            </mat-nested-tree-node>
            <mat-nested-tree-node *matTreeNodeDef="let node when: hasChild">
                <li class="tree-container">
                    <div class="mat-tree-node d-flex flex-row justify-content-between">
                        <div class="d-flex flex-row align-items-center">
                            <button class="btn" mat-icon-button matTreeNodeToggle
                                [attr.aria-label]="'Toggle ' + node.name" *ngIf="node.bandsGroups">
                                <mat-icon class="mat-icon-rtl-mirror" *ngIf="node.bandsGroups">
                                    {{treeControl.isExpanded(node) ? 'expand_more': 'chevron_right'}}
                                </mat-icon>
                            </button>
                            <mat-checkbox color="success"></mat-checkbox>
                            <span class="product-name">{{node.productFriendlyName ? node.productFriendlyName :
                                node.name}}</span>
                        </div>
                        <div class="d-flex flex-row gap-2 mr-2" *ngIf="node.bandsGroups">
                            <button class="btn"><fa-icon [icon]="faDownload" title="Download Product"
                                    (click)="downloadProduct(node)"></fa-icon></button>
                            <button class="btn"><fa-icon [icon]="faShare" title="Share Product"></fa-icon></button>
                            <button class="btn"><fa-icon [icon]="faInfoCircle" title="Properties"
                                    (click)="openProductProperties($event)"></fa-icon></button>
                            <button class="btn"><fa-icon [icon]="faTrash" title="Delete Product"
                                    (click)="deleteProduct(node)"></fa-icon></button>
                        </div>

                    </div>
                    <ul class="tree-nested-node" style="padding-left:2rem">
                        <div [class.tree-invisible]="!treeControl.isExpanded(node)" role="group">
                            <ng-container matTreeNodeOutlet></ng-container>
                        </div>
                    </ul>
                </li>
            </mat-nested-tree-node>
        </mat-tree>
    </div>
</div>